<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch</title>
</head>
<body>
    
    <form >
        <label for="username">
            Username : <input type="text" name="username" id="username">
        </label>       
        <br>
        <label for="password">
            Password : <input type="password" name="password" id="password">
        </label>
        <br>
        <input type="button" value="Login" id="login">
    </form>

    <h4 id="response"></h4>
    <script>
        function doLogin(){
            //fetch api dengan object request
            const request = new Request("https://hookb.in/LgdODzD2aQS1lrp1aQB6", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Accept": "application/json"
                },
                body: JSON.stringify({
                    username: document.getElementById("username").value,
                    password: document.getElementById("password").value
                })
            });
            //fetch api dengan object request

            //fetch API tanpa object request atau langsung dengan fetch
            /*const response = fetch("https://hookb.in/LgdODzD2aQS1lrp1aQB6", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Accept": "application/json"
                },
                body: JSON.stringify({
                    username: document.getElementById("username").value,
                    password: document.getElementById("password").value
                })
            });*/


            //ini Promise yang berisi <Response>
            const respon = fetch(request);
            console.log(respon);
            respon.then((response) => response.json())
            .then(function (json) {
                document.getElementById("response").textContent = json.success;
            }).catch(function (error){
                document.getElementById("response").textContent = error;
            });
        }
        
        document.getElementById("login").onclick = doLogin;
    </script>
</body>
</html>